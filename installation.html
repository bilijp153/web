<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>安装指南 | ASUS FL8700JP 黑苹果项目</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="assets/style.css">
</head>
<body>
  <header>
    <div class="container">
      <div class="header-content">
        <a href="index.html" class="logo">ASUS FL8700JP 黑苹果项目</a>
        <button class="mobile-menu-btn" id="mobileMenuBtn">
          <i class="fas fa-bars"></i>
        </button>
        <nav class="nav-menu" id="navMenu">
          <a href="index.html" class="nav-link" data-page="home">主页</a>
          <a href="hardware.html" class="nav-link" data-page="hardware">硬件支持</a>
          <a href="installation.html" class="nav-link active" data-page="installation">安装指南</a>
          <a href="faq.html" class="nav-link" data-page="faq">常见问题</a>
          <a href="compatibility.html" class="nav-link" data-page="compatibility">系统兼容</a>
          <a href="https://github.com" class="nav-link" target="_blank">GitHub</a>
          <select class="language-selector" id="languageSelector">
            <option value="zh-CN">简体中文</option>
            <option value="zh-TW">繁體中文</option>
            <option value="en">English</option>
          </select>
          <button class="theme-toggle" id="themeToggle">
            <i class="fas fa-moon"></i>
          </button>
        </nav>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="page-header">
      <h1>macOS 安装指南</h1>
      <p>从 BIOS 设置到系统迁移的完整流程</p>
    </div>

    <div class="steps">
      <div class="step fade-in">
        <strong>1. 准备工作</strong><br>
        下载最新版 OpenCore 引导文件与 macOS 安装镜像（需自行准备）。
      </div>
      <div class="step fade-in">
        <strong>2. BIOS 设置</strong><br>
        关闭 Secure Boot、Fast Boot；启用 AHCI 模式；禁用 VT-d（如存在）。
      </div>
      <div class="step fade-in">
        <strong>3. 制作启动盘</strong><br>
        使用 BalenaEtcher 或 Rufus 将 macOS 镜像写入 U 盘，并复制 EFI 文件夹至 EFI 分区。
      </div>
      <div class="step fade-in">
        <strong>4. 安装系统</strong><br>
        从 U 盘启动，选择 “Install macOS” 进行安装（约 20-40 分钟）。
      </div>
      <div class="step fade-in">
        <strong>5. 迁移 EFI</strong><br>
        安装完成后，将 U 盘中的 EFI 文件夹复制到硬盘的 EFI 分区，实现免 U 盘启动。
      </div>
    </div>

    <div class="card fade-in" style="margin-top: 2rem;">
      <h3>⚠️ 注意事项</h3>
      <ul style="padding-left: 1.5rem; margin-top: 0.5rem; color: var(--text-light);">
        <li>请勿升级 BIOS 至 311 版本以上，可能导致无法开机</li>
        <li>首次安装建议断开网络，避免系统自动更新破坏兼容性</li>
        <li>若遇卡顿，请尝试在 config.plist 中关闭 CpuPm/CpuTscSync</li>
      </ul>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="social-links">
          <a href="https://github.com" target="_blank"><i class="fab fa-github"></i></a>
        </div>
        <p class="copyright">📜 许可证: MIT License | © 2021-2025 极光呆呆脑 - 保留所有权利</p>
        <p class="copyright">温馨提示：本项目仅用于学习和研究目的，使用 macOS 请遵守苹果公司相关协议</p>
      </div>
    </div>
  </footer>

  <script>
    const translations = {
      'zh-CN': {
        home: '主页',
        hardware: '硬件支持',
        installation: '安装指南',
        faq: '常见问题',
        compatibility: '系统兼容',
        github: 'GitHub',
        '简体中文': '简体中文',
        '繁體中文': '繁體中文',
        English: 'English',
        title: 'macOS 安装指南',
        subtitle: '从 BIOS 设置到系统迁移的完整流程',
        step1: '1. 准备工作',
        desc1: '下载最新版 OpenCore 引导文件与 macOS 安装镜像（需自行准备）。',
        step2: '2. BIOS 设置',
        desc2: '关闭 Secure Boot、Fast Boot；启用 AHCI 模式；禁用 VT-d（如存在）。',
        step3: '3. 制作启动盘',
        desc3: '使用 BalenaEtcher 或 Rufus 将 macOS 镜像写入 U 盘，并复制 EFI 文件夹至 EFI 分区。',
        step4: '4. 安装系统',
        desc4: '从 U 盘启动，选择 “Install macOS” 进行安装（约 20-40 分钟）。',
        step5: '5. 迁移 EFI',
        desc5: '安装完成后，将 U 盘中的 EFI 文件夹复制到硬盘的 EFI 分区，实现免 U 盘启动。',
        noteTitle: '⚠️ 注意事项',
        note1: '请勿升级 BIOS 至 311 版本以上，可能导致无法开机',
        note2: '首次安装建议断开网络，避免系统自动更新破坏兼容性',
        note3: '若遇卡顿，请尝试在 config.plist 中关闭 CpuPm/CpuTscSync',
        license: '许可证: MIT License | © 2021-2025 极光呆呆脑 - 保留所有权利',
        disclaimer: '温馨提示：本项目仅用于学习和研究目的，使用 macOS 请遵守苹果公司相关协议'
      },
      'zh-TW': {
        home: '主頁',
        hardware: '硬體支援',
        installation: '安裝指南',
        faq: '常見問題',
        compatibility: '系統相容',
        github: 'GitHub',
        '简体中文': '簡體中文',
        '繁體中文': '繁體中文',
        English: 'English',
        title: 'macOS 安裝指南',
        subtitle: '從 BIOS 設定到系統遷移的完整流程',
        step1: '1. 準備工作',
        desc1: '下載最新版 OpenCore 引導檔案與 macOS 安裝映像（需自行準備）。',
        step2: '2. BIOS 設定',
        desc2: '關閉 Secure Boot、Fast Boot；啟用 AHCI 模式；禁用 VT-d（如存在）。',
        step3: '3. 製作啟動碟',
        desc3: '使用 BalenaEtcher 或 Rufus 將 macOS 映像寫入 USB，並複製 EFI 資料夾至 EFI 分割區。',
        step4: '4. 安裝系統',
        desc4: '從 USB 啟動，選擇 “Install macOS” 進行安裝（約 20-40 分鐘）。',
        step5: '5. 遷移 EFI',
        desc5: '安裝完成後，將 USB 中的 EFI 資料夾複製到硬碟的 EFI 分割區，實現免 USB 啟動。',
        noteTitle: '⚠️ 注意事項',
        note1: '請勿升級 BIOS 至 311 版本以上，可能導致無法開機',
        note2: '首次安裝建議斷開網路，避免系統自動更新破壞相容性',
        note3: '若遇卡頓，請嘗試在 config.plist 中關閉 CpuPm/CpuTscSync',
        license: '許可證: MIT License | © 2021-2025 極光呆呆腦 - 保留所有權利',
        disclaimer: '溫馨提示：本專案僅用於學習和研究目的，使用 macOS 請遵守蘋果公司相關協議'
      },
      'en': {
        home: 'Home',
        hardware: 'Hardware Support',
        installation: 'Installation Guide',
        faq: 'FAQ',
        compatibility: 'Compatibility',
        github: 'GitHub',
        '简体中文': 'Simplified Chinese',
        '繁體中文': 'Traditional Chinese',
        English: 'English',
        title: 'macOS Installation Guide',
        subtitle: 'Complete workflow from BIOS settings to system migration',
        step1: '1. Preparation',
        desc1: 'Download the latest OpenCore bootloader and macOS installer (you must provide the installer).',
        step2: '2. BIOS Settings',
        desc2: 'Disable Secure Boot and Fast Boot; enable AHCI mode; disable VT-d if present.',
        step3: '3. Create Bootable USB',
        desc3: 'Use BalenaEtcher or Rufus to write the macOS image to a USB drive, then copy the EFI folder to the EFI partition.',
        step4: '4. Install macOS',
        desc4: 'Boot from USB and select “Install macOS” (takes ~20-40 minutes).',
        step5: '5. Migrate EFI',
        desc5: 'After installation, copy the EFI folder from USB to your internal drive’s EFI partition for USB-free booting.',
        noteTitle: '⚠️ Notes',
        note1: 'Do NOT upgrade BIOS beyond version 311, may cause boot failure',
        note2: 'Disconnect network during first install to prevent auto-updates',
        note3: 'If laggy, try disabling CpuPm/CpuTscSync in config.plist',
        license: 'License: MIT License | © 2021-2025 AuroraDumbBrain - All rights reserved',
        disclaimer: 'Reminder: This project is for learning and research purposes only. Please comply with Apple\'s relevant agreements when using macOS.'
      }
    };

    const currentPage = 'installation';
    // ... [其余脚本同 hardware.html，仅替换 updateLanguage 内容]
    const languageSelector = document.getElementById('languageSelector');
    const themeToggle = document.getElementById('themeToggle');
    const mobileMenuBtn = document.getElementById('mobileMenuBtn');
    const navMenu = document.getElementById('navMenu');

    function initLanguage() {
      const savedLang = localStorage.getItem('preferredLanguage') || 'zh-CN';
      languageSelector.value = savedLang;
      updateLanguage(savedLang);
    }

    function updateLanguage(lang) {
      localStorage.setItem('preferredLanguage', lang);
      document.title = translations[lang].title + ' | ASUS FL8700JP 黑苹果项目';

      document.querySelectorAll('.nav-link[data-page]').forEach(link => {
        const key = link.getAttribute('data-page');
        if (translations[lang][key]) link.textContent = translations[lang][key];
      });
      const gh = document.querySelector('.nav-link[href="https://github.com"]');
      if (gh) gh.textContent = translations[lang].github;

      document.querySelector('.page-header h1').textContent = translations[lang].title;
      document.querySelector('.page-header p').textContent = translations[lang].subtitle;

      const steps = document.querySelectorAll('.step');
      const stepKeys = ['step1', 'step2', 'step3', 'step4', 'step5'];
      const descKeys = ['desc1', 'desc2', 'desc3', 'desc4', 'desc5'];
      steps.forEach((step, i) => {
        step.innerHTML = `<strong>${translations[lang][stepKeys[i]]}</strong><br>${translations[lang][descKeys[i]]}`;
      });

      const card = document.querySelector('.card');
      if (card) {
        card.querySelector('h3').textContent = translations[lang].noteTitle;
        const lis = card.querySelectorAll('li');
        if (lis[0]) lis[0].textContent = translations[lang].note1;
        if (lis[1]) lis[1].textContent = translations[lang].note2;
        if (lis[2]) lis[2].textContent = translations[lang].note3;
      }

      const fps = document.querySelectorAll('.copyright');
      if (fps[0]) fps[0].textContent = translations[lang].license;
      if (fps[1]) fps[1].textContent = translations[lang].disclaimer;

      Array.from(languageSelector.options).forEach(opt => {
        const txt = opt.textContent;
        if (translations[lang][txt]) opt.textContent = translations[lang][txt];
      });
    }

    function applyTheme(isDark) {
      if (isDark) {
        document.body.setAttribute('data-theme', 'dark');
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        localStorage.setItem('preferredTheme', 'dark');
      } else {
        document.body.removeAttribute('data-theme');
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        localStorage.removeItem('preferredTheme');
      }
    }

    function toggleTheme() {
      const isDark = document.body.hasAttribute('data-theme');
      applyTheme(!isDark);
    }

    function closeMobileMenu() {
      navMenu.classList.remove('active');
    }

    document.addEventListener('click', (e) => {
      if (!navMenu.classList.contains('active')) return;
      const isClickInside = navMenu.contains(e.target) || mobileMenuBtn.contains(e.target);
      if (!isClickInside) closeMobileMenu();
    });

    window.addEventListener('scroll', () => {
      if (navMenu.classList.contains('active')) closeMobileMenu();
    });

    document.querySelectorAll('.nav-link').forEach(link => {
      link.addEventListener('click', closeMobileMenu);
    });

    languageSelector.addEventListener('change', e => updateLanguage(e.target.value));
    themeToggle.addEventListener('click', toggleTheme);
    mobileMenuBtn.addEventListener('click', () => navMenu.classList.toggle('active'));

    if (localStorage.getItem('preferredTheme') === 'dark' || 
        (!localStorage.getItem('preferredTheme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      applyTheme(true);
    }

    document.addEventListener('DOMContentLoaded', () => {
      initLanguage();
      document.querySelectorAll('.fade-in').forEach(el => {
        const rect = el.getBoundingClientRect();
        if (rect.top < window.innerHeight - 100) el.classList.add('appear');
      });
    });
  </script>
</body>
</html>
